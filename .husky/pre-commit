#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for temporary work files that shouldn't be committed
TEMP_FILES=$(git diff --cached --name-only | grep -E '(mitm-login\.txt|request-response-payloads\.txt|test-auth\.js|\.tmp$|\.temp$|_debug\.txt$|_log\.txt$)' || true)

if [ -n "$TEMP_FILES" ]; then
  echo "‚ùå Error: Attempting to commit temporary work files:"
  echo "$TEMP_FILES"
  echo ""
  echo "These files should not be committed. Please remove them from staging:"
  echo "  git reset HEAD <file>"
  echo ""
  echo "Or add them to .gitignore if they should be ignored."
  exit 1
fi

# Run lint-staged
npx lint-staged

